---
layout: post
category: "Database"
title:  "php 챗봇서버"
tags: [Database]
---


챗봇



###1. 카카오톡 챗봇

챗봇구조그림

챗봇의 구조를 보게 되면 서버가 필요함을 알 수 있다. 필자는 따로 서버를 가지고 있지 않아서 VM을 서버로 두었다. 하지만, VM은 설정을 해줘야만 외부에서 접속이 되기 때문에 따로 설정을 해줘야 한다.  NAT방식이나 Bridge방식 둘 다 가능하지만, 필자는 Bridge 방식을 이용했다.   

keyboardㄱ -> input -> message버튼을 선택하면, 해당 버튼의 이름으로 값을 전송하고 message에서 input값을 읽어 행동을 취한다. 그렇기에 우리는 처음 방에 접속하면 나오는 keyboard와 그 후 메시지를 처리할 message 2개만 구현하면 된다.

![Bridge](https://github.com/P00HP00H/P00HP00H.github.io/blob/4f88b77a75c27f99b7b478f210814a31c7f77347/img/Bridge.JPG?raw=true)

이번에 만들어 본 챗봇이고, 원하는 시간대에 버스시간을 입력하면 해당 버스시간표를 조회해준다. 







###- 플러스 친구 가입하기

![NAT](https://github.com/P00HP00H/P00HP00H.github.io/blob/4f88b77a75c27f99b7b478f210814a31c7f77347/img/NAT.JPG?raw=true)

https://center-pf.kakao.com 여기로 들어가서 '플러스친구 만들기'를 눌러 카카오톡 아이디로 로그인을 하면 이런 화면이 나온다.

플러스친구2

여기서 '새 플러스친구 만들기'를 클릭한다.

플러스친구3

필요한 부분들을 채워넣고 확인을 누르면

플러스친구4

왼쪽을 보면 '스마트채팅' 버튼이 있다. 이를 클릭해보면

플러스친구5

연필 아이콘 모양이 있는데, 이를 클릭하면

플러스친구6

여기를 보면, 다른 거는 그냥 입력해주면 되는데 앱URL 부분이 문제이다. 오른쪽을 보게 되면 'API테스트'가 있는데 이를 통과해야만 한다. 앱 URL주소는 해당서버에 keyboard.php가 존재하는 경로이면 된다. 필자의 경우, /var/www/html/busbot/keyboard.php였기에 앱 URL에 'http://서버주소/busbot'를 입력해줬다.

하지만 해보면, 이런 오류가 발생한다.

플러스친구7

이 오류는 서버에 설정을 해주지 않아서이다. 이런 식으로 설정해주면 된다.

그림들

그림대로 다 해주게 되면 이런 화면이 나온다.

플러스친구성공

맨 밑으로 가면 'API 저장하기'가 있는데 이를 클릭한다. 이러면 API설정은 끝났다.

플러스친구8

'시작하기' 버튼을 눌러주면 API가 실행된다.

플러스친구9

이러면 잘 실행이 되는 것이다.

 

bus_test검색

여기서 친구추가를 한 후에 1:1채팅을 해보자.

시작

채팅방을 보면 '시작' 버튼이 있다. 이 시작버튼을 눌러보면 도움말을 입력하라는 메시지가 뜬다. 도움말을 입력해보자.

도움말

도움말을 입력하니 설명들이 나온다. 저 설명대로 한 번 입력해보면

각입력값

이런 식으로 각 입력값에 응답을 해준다. '잘못 입력하셨습니다. 다시 입력해주세요'는 '안녕'과 각 시간표 명령이 아닐 때 처리한 값이다.







웹크롤링,  포트포워딩 개념, 코딩 설명



이제 코드설명? 아니면 포트포워딩? vm서버설정 설명?

###3. Host-Only 방식

![Host-Only](https://github.com/P00HP00H/P00HP00H.github.io/blob/4f88b77a75c27f99b7b478f210814a31c7f77347/img/Host-Only.JPG?raw=true)

Host-Only 방식에서는 VMware 안에서 구성된 VM들끼리만 통신한다. 즉 VM은 해당PC (호스트
컴퓨터(PC1))를 넘어서 통신할 수 없다. 따라서, PC 1이 인터넷에 연결되어 있다고 해도 VMware는 인터넷이 되지 않는다. 





,

